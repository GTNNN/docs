import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.76cb5871.js";const g=JSON.parse('{"title":"å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½","description":"","frontmatter":{},"headers":[],"relativePath":"å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½/å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½.md","filePath":"å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½/å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½.md"}'),p={name:"å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½/å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½.md"},o=l(`<h1 id="å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½" tabindex="-1">å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½ <a class="header-anchor" href="#å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½" aria-label="Permalink to &quot;å‰ç«¯é‡Œçš„æ‹–æ‹–æ‹½æ‹½&quot;">â€‹</a></h1><p><a href="https://codesandbox.io/s/beautiful-bassi-1r5veq?file=/src/pages/sort-list/index.tsx" target="_blank" rel="noreferrer">https://codesandbox.io/s/beautiful-bassi-1r5veq?file=/src/pages/sort-list/index.tsx</a></p><blockquote><p>æœ€è¿‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº† <a href="https://link.juejin.cn?target=https://react-dnd.github.io/react-dnd/about" title="react-dnd" target="_blank" rel="noreferrer">react-dnd</a>ï¼Œä¸€ä¸ªåŸºäº HTML5 çš„æ‹–æ‹½åº“ï¼Œâ€œæ‹–æ‹½èƒ½åŠ›â€ä¸°å¯Œäº†å‰ç«¯çš„äº¤äº’æ–¹å¼ï¼ŒåŸºäºæ‹–æ‹½èƒ½åŠ›ï¼Œä¼šæ‰©å±•å„ç§å„æ ·çš„æ‹–æ‹½åé¦ˆæ•ˆæœï¼Œå› æ­¤æœ‰å¿…è¦å­¦ä¹ äº†è§£ï¼Œæœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯å®æ“ï¼</p></blockquote><p>æ‹–æ‹½äº¤äº’å¸¸è§äºå„ç§å‰ç«¯ç¼–è¾‘å™¨é‡Œï¼Œè€Œâ€œç¼–è¾‘å™¨â€æ˜¯ä¸€ä¸ªé›†æˆå‰ç«¯æŠ€æœ¯èƒ½åŠ›çš„ç»¼åˆæ€§å·¥ç¨‹ï¼Œå…¶ä¸­å°±ä¼šæ¶‰åŠåˆ°å„ç§å½¢å¼çš„æ‹–æ‹½äº¤äº’ï¼Œå› ä¸ºâ€œæ‹–æ‹½â€æ˜¯æå‡ç”¨æˆ·ä½“éªŒçš„é‡è¦äº¤äº’æ–¹å¼ï¼Œæ‰€ä»¥éœ€è¦å¯¹æ‹–æ‹½çš„äº¤äº’æ•ˆæœåšå„ç§å®šåˆ¶åŒ–ï¼Œä½œä¸ºå¼€å‘è€…ç†åº”ç†Ÿç»ƒæŒæ¡â€œæ‹–æ‹½â€çš„åº”ç”¨ï¼</p><p>æœ€è¿‘åœ¨å¼€å‘ä¸€æ¬¾ä½ä»£ç å¹³å°ï¼Œæ‰€ä»¥å€Ÿæ­¤æœºä¼šåˆ†äº«ä¸€ä¸‹å…³äºâ€œæ‹–æ‹½â€è¿™ä¸€äº¤äº’çš„åŸºç¡€çŸ¥è¯†å’Œå®è·µç»éªŒï¼Œå¸Œæœ›å¯ä»¥ç»™æœ‰éœ€è¦çš„åŒå­¦æä¾›ä¸€ç‚¹å‚è€ƒã€‚</p><h1 id="ä¸€ã€html5-ä¸­çš„æ‹–æ”¾" tabindex="-1">ä¸€ã€HTML5 ä¸­çš„æ‹–æ”¾ <a class="header-anchor" href="#ä¸€ã€html5-ä¸­çš„æ‹–æ”¾" aria-label="Permalink to &quot;ä¸€ã€HTML5 ä¸­çš„æ‹–æ”¾&quot;">â€‹</a></h1><p>æ‹–ï¼ˆDragï¼‰å’Œæ”¾ï¼ˆDropï¼‰æ˜¯ HTML5 æ ‡å‡†çš„ç»„æˆéƒ¨åˆ†ï¼Œäº†è§£æŒæ¡ä¹‹åï¼Œä¸¾ä¸€åä¸‰ï¼Œæœ‰åŠ©äºæå‡æˆ‘ä»¬åœ¨æ‹–æ‹½åœºæ™¯ä¸‹æŠ€æœ¯æ–¹æ¡ˆçš„è®¾è®¡èƒ½åŠ›ã€‚</p><h2 id="_1-1-draggable-å±æ€§" tabindex="-1">1.1 draggable å±æ€§ <a class="header-anchor" href="#_1-1-draggable-å±æ€§" aria-label="Permalink to &quot;1.1 draggable å±æ€§&quot;">â€‹</a></h2><p>ç°ä»£æµè§ˆå™¨ä¸­ï¼Œä¸éš¾å‘ç°ï¼Œå›¾ç‰‡æ ‡ç­¾ï¼ˆ<code>&lt;img /&gt;</code>ï¼‰æ˜¯å¯ä»¥è¢«é•¿æŒ‰æ‹–æ‹½ï¼Œä½†å¦‚æœéœ€è¦è‡ªå®šä¹‰çš„ DOM èŠ‚ç‚¹å¯ä»¥è¢«æ‹–æ‹½éœ€è¦é…ç½®ä»¥å‘Šè¯‰æµè§ˆå™¨æä¾›å¯¹å…ƒç´ ï¼ˆ<code>Element</code> / <code>Tag</code>ï¼‰æ”¯æŒæ‹–æ‹½çš„èƒ½åŠ›ã€‚</p><p>è€Œå…ƒç´ æ˜¯å¦å…è®¸è¢«æ‹–æ”¾ä¸”å¯å“åº” API æ“ä½œä¾èµ–äº <a href="https://link.juejin.cn?target=https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/draggable" title="draggable" target="_blank" rel="noreferrer">draggable</a> å…¨å±€æ ‡ç­¾å±æ€§</p><p><strong>draggable</strong> æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ç±»å‹çš„æ ‡ç­¾å±æ€§ï¼š</p><ul><li><code>true</code>ï¼šå…ƒç´ å¯è¢«æ‹–æ‹½</li><li><code>false</code>ï¼šå…ƒç´ ä¸å¯æ‹–æ‹½</li></ul><p>å½“å…ƒç´ è®¾ç½®äº† draggable å±æ€§ï¼Œæ­¤æ—¶é•¿æŒ‰å°±å¯ä»¥è‡ªç”±æ‹–æ‹½äº†ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6809b3642c454837b5eda33d9feefe85~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><h2 id="_1-2-drag-drop-äº‹ä»¶" tabindex="-1">1.2 Drag &amp; Drop äº‹ä»¶ <a class="header-anchor" href="#_1-2-drag-drop-äº‹ä»¶" aria-label="Permalink to &quot;1.2 Drag &amp; Drop äº‹ä»¶&quot;">â€‹</a></h2><p>HTML çš„ <code>drag</code> &amp; <code>drop</code> ä½¿ç”¨äº†â€œ<strong>DOM Event</strong>â€å’Œä»â€œ<strong>Mouse Event</strong>â€ç»§æ‰¿è€Œæ¥çš„â€œ<strong>drag event</strong>â€ ã€‚</p><p><strong>ä¸€ä¸ªå…¸å‹çš„æ‹–æ‹½æ“ä½œï¼š</strong> ç”¨æˆ·é€‰ä¸­ä¸€ä¸ªå¯æ‹–æ‹½çš„ï¼ˆ<code>draggable</code>ï¼‰å…ƒç´ ï¼Œå¹¶å°†å…¶æ‹–æ‹½ï¼ˆé¼ æ ‡æŒ‰ä½ä¸æ”¾ï¼‰è‡³ä¸€ä¸ªå¯æ”¾ç½®çš„ï¼ˆ<code>droppable</code>ï¼‰å…ƒç´ ä¸Šï¼Œç„¶åæ¾å¼€é¼ æ ‡ã€‚</p><p>åœ¨æ‹–åŠ¨å…ƒç´ æœŸé—´ï¼Œä¸€äº›ä¸æ‹–æ”¾ç›¸å…³çš„äº‹ä»¶ä¼šè¢«è§¦å‘ï¼Œåƒ <code>drag</code> å’Œ <code>dragover</code> ç±»å‹çš„äº‹ä»¶ä¼šè¢«é¢‘ç¹è§¦å‘ã€‚</p><p>é™¤äº†å®šä¹‰æ‹–æ‹½äº‹ä»¶ç±»å‹ï¼Œæ¯ä¸ªäº‹ä»¶ç±»å‹è¿˜èµ‹äºˆäº†å¯¹åº”çš„äº‹ä»¶å¤„ç†å™¨</p><table><thead><tr><th>äº‹ä»¶ç±»å‹</th><th>äº‹ä»¶å¤„ç†å™¨</th><th>è§¦å‘æ—¶æœº</th><th>ç»‘å®šå…ƒç´ </th></tr></thead><tbody><tr><td><code>dragstart</code></td><td>ondragstart</td><td>å½“å¼€å§‹æ‹–åŠ¨ä¸€ä¸ªå…ƒç´ æ—¶</td><td>æ‹–æ‹½</td></tr><tr><td><code>drag</code></td><td>ondrag</td><td>å½“å…ƒç´ è¢«æ‹–åŠ¨æœŸé—´æŒ‰ä¸€å®šé¢‘ç‡è§¦å‘</td><td>æ‹–æ‹½</td></tr><tr><td><code>dragend</code></td><td>ondragend</td><td>å½“æ‹–åŠ¨çš„å…ƒç´ è¢«é‡Šæ”¾ï¼ˆğŸ–±ï¸æ¾å¼€ã€æŒ‰é”®ç›˜ ESCï¼‰æ—¶</td><td>æ‹–æ‹½</td></tr><tr><td><code>dragenter</code></td><td>ondragenter</td><td>å½“æ‹–åŠ¨å…ƒç´ åˆ°ä¸€ä¸ªå¯é‡Šæ”¾ç›®æ ‡å…ƒç´ æ—¶</td><td>æ”¾ç½®</td></tr><tr><td><code>dragexit</code></td><td>ondragexit</td><td>å½“å…ƒç´ å˜å¾—ä¸å†æ˜¯æ‹–åŠ¨æ“ä½œçš„é€‰ä¸­ç›®æ ‡æ—¶</td><td>æ”¾ç½®</td></tr><tr><td><code>dragleave</code></td><td>ondragleave</td><td>å½“æ‹–åŠ¨å…ƒç´ ç¦»å¼€ä¸€ä¸ªå¯é‡Šæ”¾ç›®æ ‡å…ƒç´ </td><td>æ”¾ç½®</td></tr><tr><td><code>dragover</code></td><td>ondragover</td><td>å½“å…ƒç´ è¢«æ‹–åˆ°ä¸€ä¸ªå¯é‡Šæ”¾ç›®æ ‡å…ƒç´ ä¸Šæ—¶ï¼ˆ100 ms/æ¬¡ï¼‰</td><td>æ”¾ç½®</td></tr><tr><td><code>drop</code></td><td>ondrop</td><td>å½“æ‹–åŠ¨å…ƒç´ åœ¨å¯é‡Šæ”¾ç›®æ ‡å…ƒç´ ä¸Šé‡Šæ”¾æ—¶</td><td>æ”¾ç½®</td></tr></tbody></table><p>å„ä¸ªäº‹ä»¶çš„æ—¶æœºå¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªå›¾ç®€å•è¡¨ç¤ºï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ac2bc4b8d7b4c3092864f898a3b597d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><p><strong>âš ï¸æ³¨æ„ï¼š</strong> <a href="https://link.juejin.cn?target=https://developer.mozilla.org/en-US/docs/Web/API/Document/dragover_event" title="dragOver" target="_blank" rel="noreferrer">dragOver</a> äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºæ˜¯ï¼šâ€œReset the current drag operation to &quot;none&quot;â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä¸é˜»æ­¢æ”¾ç½®å…ƒç´ çš„ dragOver äº‹ä»¶ï¼Œåˆ™æ”¾ç½®å…ƒç´ ä¸ä¼šå“åº”â€œæ‹–åŠ¨å…ƒç´ â€çš„â€œæ”¾ç½®è¡Œä¸ºâ€</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// è®©ç»‘å®šè¯¥äº‹ä»¶çš„å…ƒç´ æ”¯æŒæ”¾ç½®</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragOver</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// é˜»æ­¢é»˜è®¤çš„é‡ç½®è¡Œä¸º</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// å³å¯æˆä¸ºæ‹–æ‹½å…ƒç´ çš„æ”¾ç½®åŒº</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// è®©ç»‘å®šè¯¥äº‹ä»¶çš„å…ƒç´ æ”¯æŒæ”¾ç½®</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragOver</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// é˜»æ­¢é»˜è®¤çš„é‡ç½®è¡Œä¸º</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// å³å¯æˆä¸ºæ‹–æ‹½å…ƒç´ çš„æ”¾ç½®åŒº</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  e.</span><span style="color:#6F42C1;">preventDefault</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>ä»è®¾è®¡äº‹ä»¶æ ‡å‡†æ¥çœ‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è‡ªè¡Œå®ç°æ‹–æ‹½çš„æ•ˆæœï¼Œå°±éœ€è¦ä»è¿™å…³é”®çš„å‡ ä¸ªäº‹ä»¶å»æ€è€ƒè®¾è®¡ã€‚</p><h2 id="_1-3-datatransfer" tabindex="-1">1.3 DataTransfer <a class="header-anchor" href="#_1-3-datatransfer" aria-label="Permalink to &quot;1.3 DataTransfer&quot;">â€‹</a></h2><p>åœ¨ä¸Šè¿°çš„äº‹ä»¶ç±»å‹ä¸­ï¼Œä¸éš¾å‘ç°ï¼Œæ”¾ç½®å…ƒç´ å’Œæ‹–åŠ¨å…ƒç´ åˆ†åˆ«ç»‘å®šäº†è‡ªå·±çš„äº‹ä»¶ï¼Œå¯å¦‚ä½•å°†æ‹–æ‹½å…ƒç´ å’Œæ”¾ç½®å…ƒç´ <strong>å»ºç«‹è”ç³»</strong>ä»¥åŠ<strong>ä¼ é€’æ•°æ®</strong>ï¼Ÿ</p><p>è¿™å°±æ¶‰åŠåˆ° <code>DataTransfer</code> å¯¹è±¡ï¼š</p><blockquote><p><code>DataTransfer</code> å¯¹è±¡ç”¨äºä¿å­˜æ‹–åŠ¨å¹¶æ”¾ä¸‹ï¼ˆdrag and dropï¼‰è¿‡ç¨‹ä¸­çš„æ•°æ®ã€‚å®ƒå¯ä»¥ä¿å­˜ä¸€é¡¹æˆ–å¤šé¡¹æ•°æ®ï¼Œè¿™äº›æ•°æ®é¡¹å¯ä»¥æ˜¯ä¸€ç§æˆ–è€…å¤šç§æ•°æ®ç±»å‹ã€‚ â€”â€” <a href="https://link.juejin.cn?target=https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer" title="DataTransfer - MDN" target="_blank" rel="noreferrer">DataTransfer - MDN</a></p></blockquote><p><code>DataTransfer</code> å¯¹è±¡åœ¨ä¸åŒæµè§ˆå™¨ä¸Šå› ä¸ºæ ‡å‡†å¯èƒ½ä¸ä¸€æ ·ä½¿å¾— API æœ‰å·®å¼‚ï¼Œä½†æœ‰å‡ ä¸ªâ€œæ ‡å‡†ï¼ˆå¸¸ç”¨ï¼‰â€å±æ€§å’Œæ–¹æ³•éœ€è¦ç†Ÿæ‚‰</p><p>åœ¨ Chrome æµè§ˆå™¨ä¸Šçš„ DataTransfer å®ä¾‹å¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b201e470cf714a6ebcb7879c29d50b0d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><h3 id="_1-å±æ€§" tabindex="-1">(1) å±æ€§ <a class="header-anchor" href="#_1-å±æ€§" aria-label="Permalink to &quot;(1) å±æ€§&quot;">â€‹</a></h3><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>dropEffect</code></td><td>è·å–å½“å‰é€‰å®šçš„æ‹–æ”¾æ“ä½œç±»å‹æˆ–è€…è®¾ç½®çš„ä¸ºä¸€ä¸ªæ–°çš„ç±»å‹ã€‚å€¼ä¸ºï¼šnoneã€copyã€linkã€move</td></tr><tr><td><code>effectAllowed</code></td><td>æä¾›æ‰€æœ‰å¯ç”¨çš„æ“ä½œç±»å‹ã€‚å€¼æ˜¯ï¼šnoneã€copyã€copyLinkã€copyMoveã€linkã€linkMoveã€moveã€allã€uninitialized</td></tr><tr><td><code>files</code></td><td>åŒ…å«æ•°æ®ä¼ è¾“ä¸­å¯ç”¨çš„æ‰€æœ‰æœ¬åœ°æ–‡ä»¶çš„åˆ—è¡¨ã€‚å¦‚æœæ‹–åŠ¨æ“ä½œä¸æ¶‰åŠæ‹–åŠ¨æ–‡ä»¶ï¼Œåˆ™æ­¤å±æ€§ä¸ºç©ºåˆ—è¡¨</td></tr><tr><td><code>items</code> (åªè¯»)</td><td>æä¾›ä¸€ä¸ªåŒ…å«æ‰€æœ‰æ‹–åŠ¨æ•°æ®åˆ—è¡¨çš„ DataTransferItemList å¯¹è±¡</td></tr><tr><td><code>types</code> (åªè¯»)</td><td>æä¾›ä¸€ä¸ª dragstart äº‹ä»¶ä¸­è®¾ç½®çš„æ ¼å¼çš„ strings æ•°ç»„ã€‚</td></tr></tbody></table><h3 id="_2-æ–¹æ³•" tabindex="-1">(2) æ–¹æ³• <a class="header-anchor" href="#_2-æ–¹æ³•" aria-label="Permalink to &quot;(2) æ–¹æ³•&quot;">â€‹</a></h3><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>setData(format, value)</code></td><td>è®¾ç½®ç»™å®šç±»å‹çš„æ•°æ®ã€‚å¦‚æœè¯¥ç±»å‹çš„æ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™å°†å…¶æ·»åŠ åˆ°æœ«å°¾ï¼Œä»¥ä¾¿ç±»å‹åˆ—è¡¨ä¸­çš„æœ€åä¸€é¡¹å°†æ˜¯æ–°çš„æ ¼å¼ã€‚å¦‚æœè¯¥ç±»å‹çš„æ•°æ®å·²ç»å­˜åœ¨ï¼Œåˆ™åœ¨ç›¸åŒä½ç½®æ›¿æ¢ç°æœ‰æ•°æ®ã€‚</td></tr><tr><td><code>getData(format)</code></td><td>æ£€ç´¢ç»™å®šç±»å‹çš„æ•°æ®ï¼Œå¦‚æœè¯¥ç±»å‹çš„æ•°æ®ä¸å­˜åœ¨æˆ– data transfer ä¸åŒ…å«æ•°æ®ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²</td></tr><tr><td><code>clearData([format])</code></td><td>åˆ é™¤ä¸ç»™å®šç±»å‹å…³è”çš„æ•°æ®ã€‚ç±»å‹å‚æ•°æ˜¯å¯é€‰çš„ã€‚å¦‚æœç±»å‹ä¸ºç©ºæˆ–æœªæŒ‡å®šï¼Œåˆ™åˆ é™¤ä¸æ‰€æœ‰ç±»å‹å…³è”çš„æ•°æ®ã€‚å¦‚æœæŒ‡å®šç±»å‹çš„æ•°æ®ä¸å­˜åœ¨ï¼Œæˆ–è€… data transfer ä¸­ä¸åŒ…å«ä»»ä½•æ•°æ®ï¼Œåˆ™è¯¥æ–¹æ³•ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœã€‚</td></tr><tr><td>\`setDragImage(img</td><td>element, xOffset, yOffset)\`</td></tr></tbody></table><p>åœ¨ç®€å•çš„æ‹–æ‹½åœºæ™¯ä¸­ï¼Œå…¶å®å¯ä»¥ç±»æ¯” <strong>window.localStorage</strong> å¯¹è±¡çš„ <code>setItem()</code> å’Œ <code>getItem()</code> æ–¹æ³•æ¥ç†è§£è®°å¿†.</p><p>ä½† <code>getData()</code> åœ¨æµ‹è¯•ä¸­å‘ç°åªèƒ½åœ¨ <code>ondrop</code> äº‹ä»¶ä¸­è·å–åˆ°å€¼:</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/220c8d6b604e4b4bbc4e738229a8ca3c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><h2 id="_1-4-ä¸€ä¸ªæ¡ˆä¾‹æŒæ¡æ‹–æ”¾-api" tabindex="-1">1.4 ä¸€ä¸ªæ¡ˆä¾‹æŒæ¡æ‹–æ”¾ API <a class="header-anchor" href="#_1-4-ä¸€ä¸ªæ¡ˆä¾‹æŒæ¡æ‹–æ”¾-api" aria-label="Permalink to &quot;1.4 ä¸€ä¸ªæ¡ˆä¾‹æŒæ¡æ‹–æ”¾ API&quot;">â€‹</a></h2><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;drag&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">draggable</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;dragger&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ondragstart</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">handleDragStart</span><span style="color:#9ECBFF;">(</span><span style="color:#E1E4E8;">event</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;æ‹–åŠ¨å…ƒç´ &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;drop&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ondrop</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">handleDrop</span><span style="color:#9ECBFF;">(</span><span style="color:#E1E4E8;">event</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ondragover</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">allowDrop</span><span style="color:#9ECBFF;">(</span><span style="color:#E1E4E8;">event</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;æ”¾ç½®åŒºåŸŸ&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragStart</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    e.dataTransfer.</span><span style="color:#B392F0;">setData</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;DRAG_NODE_ID&#39;</span><span style="color:#E1E4E8;">, [e.target.id](http:</span><span style="color:#6A737D;">//e.target.id))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragOver</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDrop</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> e.dataTransfer.</span><span style="color:#B392F0;">getData</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;DRAG_NODE_ID&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    e.target.</span><span style="color:#B392F0;">appendChild</span><span style="color:#E1E4E8;">(document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(data));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">&lt;/</span><span style="color:#E1E4E8;">script</span><span style="color:#F97583;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;drag&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">draggable</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;true&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;dragger&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ondragstart</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">handleDragStart</span><span style="color:#032F62;">(</span><span style="color:#24292E;">event</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;æ‹–åŠ¨å…ƒç´ &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;drop&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ondrop</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">handleDrop</span><span style="color:#032F62;">(</span><span style="color:#24292E;">event</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ondragover</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">allowDrop</span><span style="color:#032F62;">(</span><span style="color:#24292E;">event</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;æ”¾ç½®åŒºåŸŸ&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragStart</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    e.dataTransfer.</span><span style="color:#6F42C1;">setData</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;DRAG_NODE_ID&#39;</span><span style="color:#24292E;">, [e.target.id](http:</span><span style="color:#6A737D;">//e.target.id))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragOver</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    e.</span><span style="color:#6F42C1;">preventDefault</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDrop</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    e.</span><span style="color:#6F42C1;">preventDefault</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">var</span><span style="color:#24292E;"> data </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> e.dataTransfer.</span><span style="color:#6F42C1;">getData</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;DRAG_NODE_ID&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    e.target.</span><span style="color:#6F42C1;">appendChild</span><span style="color:#24292E;">(document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(data));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">&lt;/</span><span style="color:#24292E;">script</span><span style="color:#D73A49;">&gt;</span></span></code></pre></div><p><strong>æ¼”ç¤ºæ¡ˆä¾‹ï¼š</strong> <a href="https://link.juejin.cn?target=https://codepen.io/DYBOY/pen/eYeyvWm" title="codepen.io/DYBOY/pen/eâ€¦" target="_blank" rel="noreferrer">codepen.io/DYBOY/pen/eâ€¦</a></p><p><strong>æ•ˆæœï¼š</strong></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d95bc468582b4478b0b6d68a32b1fab4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c5d2b574a6554acbb2b7ee85619df5ec~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><h2 id="_1-6-å…¼å®¹æ€§" tabindex="-1">1.6 å…¼å®¹æ€§ <a class="header-anchor" href="#_1-6-å…¼å®¹æ€§" aria-label="Permalink to &quot;1.6 å…¼å®¹æ€§&quot;">â€‹</a></h2><p>æ˜¯ HTML5 æ ‡å‡†æå‡ºçš„èƒ½åŠ›ï¼Œå› æ­¤å„å¤§æµè§ˆå™¨å‚å•†å¯¹äºæ ‡å‡†çš„æ”¯æŒæœ‰å·®å¼‚ï¼Œå…¶å…¼å®¹æ€§å‚è€ƒå¦‚ä¸‹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8be2d309ef4a450989a0cadfb23f611f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><p>ç›¸è¾ƒäºä¼ ç»Ÿçš„é€šè¿‡é¼ æ ‡äº‹ä»¶ï¼š<code>mousedown</code>ã€<code>mousemove</code>ã€<code>mouseup</code> ç»„åˆå®ç°çš„æ‹–æ‹½è¦ç®€å•å¾ˆå¤šï¼Œå°‘äº†æ”¾å…¥ç›®æ ‡è¾¹ç•Œçš„åˆ¤æ–­ï¼Œä¹Ÿå°‘äº†å¯¹ä½ç½®çš„å®æ—¶è·å–æ“ä½œã€‚</p><p>å¦å¤–ç›®å‰çš„ API ä¸ç®—å¤šï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³è¦å®šåˆ¶åŒ–æ‹–æ‹½çš„å›¾ç‰‡å¤§å°ã€é¼ æ ‡æ ·å¼ç­‰ï¼Œç›®å‰æš‚æ—¶æ²¡å‘ç°æ¯”è¾ƒæ–¹ä¾¿çš„è§£å†³æ–¹å¼ï¼Œä½†æ˜¯ä»å¦ä¸€ä¸ªè§’åº¦æ¥è¯´ï¼Œè®©æˆ‘ä»¬å¯¹äºæ‹–æ‹½èƒ½åŠ›çš„è®¾è®¡å’Œæ ‡å‡†æœ‰äº†ä¸€ä¸ªæ›´æ·±åˆ‡çš„è®¤è¯†ï¼Œå¯¹äºè®¾è®¡å®ç°æ‹–æ‹½äº¤äº’æœ‰äº†ä¸€ä¸ªâ€œç†è®ºâ€åŸºç¡€ï¼</p><h1 id="äºŒã€æ‰‹æ“ä¸€ä¸ª" tabindex="-1">äºŒã€æ‰‹æ“ä¸€ä¸ª <a class="header-anchor" href="#äºŒã€æ‰‹æ“ä¸€ä¸ª" aria-label="Permalink to &quot;äºŒã€æ‰‹æ“ä¸€ä¸ª&quot;">â€‹</a></h1><p>æœ‰äº†ä¸Šé¢çš„åŸºç¡€çŸ¥è¯†ï¼Œé‚£ä¹ˆå®ç°ä¸€ä¸ªåˆ—è¡¨æ‹–æ‹½æ’åºå¹¶ä¸æ˜¯ä»€ä¹ˆéš¾äº‹ã€‚</p><h2 id="_2-1-è®¾è®¡å®ç°" tabindex="-1">2.1 è®¾è®¡å®ç° <a class="header-anchor" href="#_2-1-è®¾è®¡å®ç°" aria-label="Permalink to &quot;2.1 è®¾è®¡å®ç°&quot;">â€‹</a></h2><p>ç»“åˆä¸Šè¿°çš„ Drag &amp; Drop çš„äº‹ä»¶ç±»å‹ï¼Œé‚£ä¹ˆæ‹–æ‹½æ’åºä¸»è¦æ˜¯é’ˆå¯¹â€œæ‹–åŠ¨å¯¹è±¡â€ä¹‹é—´ç›¸äº’ä½œç”¨å…³ç³»çš„é€»è¾‘æ¢³ç†ï¼Œæ­¤å¤„æˆ‘ä»¬æš‚ä¸”åŒºåˆ†ä¸ºï¼š</p><ul><li><strong>æºå¯¹è±¡ï¼š</strong> æ‹–æ‹½åˆ—è¡¨ä¸­è¢«æ‹–åŠ¨çš„å•ä¸ªåˆ—è¡¨é¡¹</li><li><strong>ç›®æ ‡å¯¹è±¡ï¼š</strong> æ‹–æ‹½åˆ—è¡¨ä¸­å’Œâ€œæºå¯¹è±¡â€äº§ç”Ÿâ€œç›¸äº’ä½œç”¨â€çš„åˆ—è¡¨é¡¹</li></ul><p>æ•´ä½“çš„äº¤äº’äº‹ä»¶çš„è®¾è®¡æ€è·¯å¦‚ä¸‹ï¼š</p><h3 id="_1-ondragstart" tabindex="-1">(1) ondragstart <a class="header-anchor" href="#_1-ondragstart" aria-label="Permalink to &quot;(1) ondragstart&quot;">â€‹</a></h3><p>æ­¤æ—¶å¼€å§‹æ‹–æ‹½â€œæºå¯¹è±¡â€çš„æ—¶æœºï¼Œåœ¨æ­¤äº‹ä»¶å›è°ƒå‡½æ•°ä¸­æ”¹å˜â€œæºå¯¹è±¡â€çš„æ ·å¼ï¼Œè®¾ç½®æ‹–æ‹½çš„ä¸€äº›ä¼ é€’å‚æ•°ç­‰åˆå§‹å€¼ã€‚</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡å¼€å§‹æ‹–æ‹½</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragStart</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">React</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">DragEvent</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">HTMLDivElement</span><span style="color:#E1E4E8;">&gt;) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  e.dataTransfer.effectAllowed </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;move&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">setDragId</span><span style="color:#E1E4E8;">(e.currentTarget.dataset.index); </span><span style="color:#6A737D;">// ä» dataset è·å–æ‹–æ‹½é¡¹çš„ id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡å¼€å§‹æ‹–æ‹½</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragStart</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">React</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">DragEvent</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">HTMLDivElement</span><span style="color:#24292E;">&gt;) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  e.dataTransfer.effectAllowed </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;move&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">setDragId</span><span style="color:#24292E;">(e.currentTarget.dataset.index); </span><span style="color:#6A737D;">// ä» dataset è·å–æ‹–æ‹½é¡¹çš„ id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><h3 id="_2-ondragover" tabindex="-1">(2) ondragover <a class="header-anchor" href="#_2-ondragover" aria-label="Permalink to &quot;(2) ondragover&quot;">â€‹</a></h3><p>æ­£ä¸æ‹–æ‹½ä¸­çš„â€œæºå¯¹è±¡â€äº§ç”Ÿç›¸äº’å½±å“çš„ç›®æ ‡å¯¹è±¡ï¼Œæ­¤æ—¶â€œæºå¯¹è±¡â€å¤„äºâ€œç›®æ ‡å¯¹è±¡â€çš„æ­£ä¸Šæ–¹ï¼Œç›®æ ‡å¯¹è±¡ 100ms/æ¬¡çš„é¢‘ç‡è°ƒç”¨â€œç›®æ ‡å¯¹è±¡â€çš„ <code>ondragover</code> ä¸­å£°æ˜çš„å›è°ƒäº‹ä»¶ã€‚</p><p>æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¼šè®¡ç®—æ”¹å˜â€œ<strong>æºå¯¹è±¡</strong>â€å’Œâ€œ<strong>ç›®æ ‡å¯¹è±¡</strong>â€çš„ä½ç½®ã€‚</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡åœ¨ç›®æ ‡å¯¹è±¡ä¸Šæ–¹æ—¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragOver</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">React</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">DragEvent</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">HTMLDivElement</span><span style="color:#E1E4E8;">&gt;) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">(); </span><span style="color:#6A737D;">// å…è®¸æ”¾ç½®ï¼Œé˜»æ­¢é»˜è®¤äº‹ä»¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dropId</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> e.currentTarget.dataset.index;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">move</span><span style="color:#E1E4E8;">(dragId, dropId); </span><span style="color:#6A737D;">// æ”¹å˜åŸåˆ—è¡¨æ•°æ®</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡åœ¨ç›®æ ‡å¯¹è±¡ä¸Šæ–¹æ—¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragOver</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">React</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">DragEvent</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">HTMLDivElement</span><span style="color:#24292E;">&gt;) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  e.</span><span style="color:#6F42C1;">preventDefault</span><span style="color:#24292E;">(); </span><span style="color:#6A737D;">// å…è®¸æ”¾ç½®ï¼Œé˜»æ­¢é»˜è®¤äº‹ä»¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dropId</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> e.currentTarget.dataset.index;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">move</span><span style="color:#24292E;">(dragId, dropId); </span><span style="color:#6A737D;">// æ”¹å˜åŸåˆ—è¡¨æ•°æ®</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><h3 id="_3-ondrag" tabindex="-1">(3) ondrag <a class="header-anchor" href="#_3-ondrag" aria-label="Permalink to &quot;(3) ondrag&quot;">â€‹</a></h3><p>è¯¥äº‹ä»¶ä½œç”¨äºâ€œæºå¯¹è±¡â€ï¼Œæ­¤æ—¶æ­£å¤„äºæ‹–æ‹½è¿‡ç¨‹ä¸­ï¼Œæ­¤æ—¶å¯ä»¥æ”¹å˜æºå¯¹è±¡çš„ <code>opacity</code>ã€<code>display(none)</code>ã€<code>visiblity</code> æ ·å¼å±æ€§ï¼Œå¦‚æœåœ¨ <code>dragstart</code> äº‹ä»¶æ”¹å˜ï¼Œåˆ™ä¼šå¯¼è‡´æ‹–æ‹½æ‹·è´å¯¹è±¡ä¸¢å¤±ã€‚</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡è¢«æ‹–æ‹½è¿‡ç¨‹ä¸­</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDrag</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">React</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">DragEvent</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">HTMLDivElement</span><span style="color:#E1E4E8;">&gt;) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  e.currentTarget.style.opacity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;0&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡è¢«æ‹–æ‹½è¿‡ç¨‹ä¸­</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDrag</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">React</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">DragEvent</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">HTMLDivElement</span><span style="color:#24292E;">&gt;) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  e.currentTarget.style.opacity </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;0&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><h3 id="_4-ondragend" tabindex="-1">(4) ondragend <a class="header-anchor" href="#_4-ondragend" aria-label="Permalink to &quot;(4) ondragend&quot;">â€‹</a></h3><p>åœ¨æ¾æ‰‹å®Œæˆâ€œæºå¯¹è±¡â€çš„æ”¾ç½®æ—¶ï¼Œä¸»åŠ¨è°ƒç”¨ç»‘å®šåœ¨â€œæºå¯¹è±¡â€èº«ä¸Šçš„äº‹ä»¶ï¼Œæ­¤æ—¶æ¢å¤æ›´æ”¹çš„æ ·å¼ã€‚</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡è¢«æ”¾ç½®å®Œæˆæ—¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragEnd</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">React</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">DragEvent</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">HTMLDivElement</span><span style="color:#E1E4E8;">&gt;) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  e.currentTarget.style.opacity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;1&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡è¢«æ”¾ç½®å®Œæˆæ—¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragEnd</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">React</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">DragEvent</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">HTMLDivElement</span><span style="color:#24292E;">&gt;) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  e.currentTarget.style.opacity </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;1&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><h2 id="_2-2-å®ç°æ•ˆæœ" tabindex="-1">2.2 å®ç°æ•ˆæœ <a class="header-anchor" href="#_2-2-å®ç°æ•ˆæœ" aria-label="Permalink to &quot;2.2 å®ç°æ•ˆæœ&quot;">â€‹</a></h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf398c2c3d5e4f88b0d6684e0bb9d04f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><h2 id="_2-3-åŠ ç‚¹åŠ¨ç”»" tabindex="-1">2.3 åŠ ç‚¹åŠ¨ç”» <a class="header-anchor" href="#_2-3-åŠ ç‚¹åŠ¨ç”»" aria-label="Permalink to &quot;2.3 åŠ ç‚¹åŠ¨ç”»&quot;">â€‹</a></h2><p>ä¸Šé¢çš„å®ç°ä¸­æ•ˆæœè¿˜ç®—å¯ä»¥ï¼Œä½†æ˜¯å°‘äº†æ‹–æ‹½é¡¹çš„åˆ‡æ¢è¿‡ç¨‹åŠ¨ç”»ï¼Œç›´æ¥åœ¨ dragover äº‹ä»¶ä¸­é€šè¿‡ <code>move(dragId, dropId)</code> æ–¹æ³•ç›´æ¥ä¿®æ”¹äº†åŸåˆ—è¡¨æ•°æ®çš„æ’åºï¼Œå¯¼è‡´åˆ‡æ¢çªå˜ã€‚</p><p>å€ŸåŠ© <code>animation</code> æ–°å¢ CSS å¸§åŠ¨ç”»ï¼š</p><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">@keyframes</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">dropUp</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">100%</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">transform</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">translateY</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">5</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">@keyframes</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">dropDown</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">100%</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">transform</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">translateY</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">-5</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">.drop-up</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">animation</span><span style="color:#E1E4E8;">: dropUp </span><span style="color:#79B8FF;">0.3</span><span style="color:#F97583;">s</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ease-in-out</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">forwards</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">.drop-down</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">animation</span><span style="color:#E1E4E8;">: dropDown </span><span style="color:#79B8FF;">0.3</span><span style="color:#F97583;">s</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ease-in-out</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">forwards</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">@keyframes</span><span style="color:#24292E;"> </span><span style="color:#E36209;">dropUp</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">100%</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">transform</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">translateY</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">5</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">@keyframes</span><span style="color:#24292E;"> </span><span style="color:#E36209;">dropDown</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">100%</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">transform</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">translateY</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">-5</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.drop-up</span><span style="color:#24292E;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">animation</span><span style="color:#24292E;">: dropUp </span><span style="color:#005CC5;">0.3</span><span style="color:#D73A49;">s</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ease-in-out</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">forwards</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.drop-down</span><span style="color:#24292E;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">animation</span><span style="color:#24292E;">: dropDown </span><span style="color:#005CC5;">0.3</span><span style="color:#D73A49;">s</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ease-in-out</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">forwards</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>åŒæ ·çš„åœ¨ <code>dragOver</code> äº‹ä»¶ä¸­å¤„ç†ï¼Œæ–°å¢é€»è¾‘ä»£ç ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡åœ¨ç›®æ ‡å¯¹è±¡ä¸Šæ–¹æ—¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragOver</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">React</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">DragEvent</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">HTMLDivElement</span><span style="color:#E1E4E8;">&gt;) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// è®¾ç½®åŠ¨ç”»</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dropId</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> e.currentTarget.dataset.index;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dragIndex</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">findIndex</span><span style="color:#E1E4E8;">(listData, (</span><span style="color:#FFAB70;">i</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> [i.id](http:</span><span style="color:#6A737D;">//i.id) === dragId);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  const dropIndex </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">findIndex</span><span style="color:#E1E4E8;">(listData, (</span><span style="color:#FFAB70;">i</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> [i.id](http:</span><span style="color:#6A737D;">//i.id) === dropId);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// é€šè¿‡å¢åŠ å¯¹åº”çš„ CSS classï¼Œå®ç°è§†è§‰ä¸Šçš„åŠ¨ç”»è¿‡æ¸¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  e.currentTarget.classList.</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;drop-up&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;drop-down&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">if</span><span style="color:#E1E4E8;"> (dragIndex </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> dropIndex) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    e.currentTarget.classList.add(</span><span style="color:#9ECBFF;">&quot;drop-down&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  } else if (dragIndex &gt; dropIndex) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    e.currentTarget.classList.add(</span><span style="color:#9ECBFF;">&quot;drop-up&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  } </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// æºå¯¹è±¡åœ¨ç›®æ ‡å¯¹è±¡ä¸Šæ–¹æ—¶</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragOver</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">React</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">DragEvent</span><span style="color:#24292E;">&lt;</span><span style="color:#6F42C1;">HTMLDivElement</span><span style="color:#24292E;">&gt;) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// è®¾ç½®åŠ¨ç”»</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dropId</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> e.currentTarget.dataset.index;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dragIndex</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">findIndex</span><span style="color:#24292E;">(listData, (</span><span style="color:#E36209;">i</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> [i.id](http:</span><span style="color:#6A737D;">//i.id) === dragId);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  const dropIndex </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">findIndex</span><span style="color:#24292E;">(listData, (</span><span style="color:#E36209;">i</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> [i.id](http:</span><span style="color:#6A737D;">//i.id) === dropId);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// é€šè¿‡å¢åŠ å¯¹åº”çš„ CSS classï¼Œå®ç°è§†è§‰ä¸Šçš„åŠ¨ç”»è¿‡æ¸¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  e.currentTarget.classList.</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;drop-up&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;drop-down&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">if</span><span style="color:#24292E;"> (dragIndex </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> dropIndex) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    e.currentTarget.classList.add(</span><span style="color:#032F62;">&quot;drop-down&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  } else if (dragIndex &gt; dropIndex) {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    e.currentTarget.classList.add(</span><span style="color:#032F62;">&quot;drop-up&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  } </span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  ...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre></div><p>å¢åŠ äº†åŠ¨ç”»çš„æ•ˆæœï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c91401fe76364dc78d2097a1bce2a2a6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><p>çœ‹èµ·æ¥ä¼¼ä¹å¥½ä¸€ç‚¹äº†ï¼Œå½“ç„¶å¤§å®¶å¯ä»¥å»æ‰©å……åŠ¨ç”»çš„æ•ˆæœï¼Œäº¦æˆ–è€…å€ŸåŠ©ä¸‰æ–¹åŠ¨ç”»åº“ã€‚</p><h1 id="ä¸‰ã€å·²æœ‰æ‹–æ‹½åº“" tabindex="-1">ä¸‰ã€å·²æœ‰æ‹–æ‹½åº“ <a class="header-anchor" href="#ä¸‰ã€å·²æœ‰æ‹–æ‹½åº“" aria-label="Permalink to &quot;ä¸‰ã€å·²æœ‰æ‹–æ‹½åº“&quot;">â€‹</a></h1><p>ç›®å‰ä¸»æµçš„æ‹–æ‹½åº“æœ‰ï¼š</p><ul><li><strong>react-dnd:</strong> <a href="https://link.juejin.cn?target=https://github.com/react-dnd/react-dnd/" title="github.com/react-dnd/râ€¦" target="_blank" rel="noreferrer">github.com/react-dnd/râ€¦</a></li><li><strong>react-beautiful-dnd:</strong> <a href="https://link.juejin.cn?target=https://github.com/atlassian/react-beautiful-dnd/" title="github.com/atlassian/râ€¦" target="_blank" rel="noreferrer">github.com/atlassian/râ€¦</a></li><li><strong>sortablejs:</strong> <a href="https://link.juejin.cn?target=https://sortablejs.github.io/Sortable/" title="sortablejs.github.io/Sortable/" target="_blank" rel="noreferrer">sortablejs.github.io/Sortable/</a></li><li><strong>react-sortable-hoc:</strong> <a href="https://link.juejin.cn?target=https://github.com/clauderic/react-sortable-hoc/" title="github.com/clauderic/râ€¦" target="_blank" rel="noreferrer">github.com/clauderic/râ€¦</a></li></ul><p>å…³äºå‡ è€…çš„å·®å¼‚ï¼Œå¯ä»¥å‚é˜…ï¼šã€Š<a href="https://juejin.cn/post/6956112150989373448" title="å…³äºreactä¸­ä½¿ç”¨æ‹–æ‹½æ’ä»¶çš„è¯„æµ‹" target="_blank" rel="noreferrer">å…³äºreactä¸­ä½¿ç”¨æ‹–æ‹½æ’ä»¶çš„è¯„æµ‹</a>ã€‹</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4a53a4dd792a41a591140c402d7c93c4~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp" alt=""></p><h1 id="å››ã€æ€»ç»“" tabindex="-1">å››ã€æ€»ç»“ <a class="header-anchor" href="#å››ã€æ€»ç»“" aria-label="Permalink to &quot;å››ã€æ€»ç»“&quot;">â€‹</a></h1><p>ç”±äºä½ä»£ç å¹³å°å…¶å®ä¼šæœ‰ä¸°å¯Œçš„æ‹–æ‹½åœºæ™¯ï¼Œä»å¯æ‰©å±•å’Œå…¼å®¹æ€§ä¸Šè€ƒè™‘ï¼Œæœ€ç»ˆé€‰æ‹©äº† <code>react-dnd</code> ä½œä¸ºåŸºç¡€æ‹–æ‹½åº“ï¼Œå½“ç„¶ï¼Œåœ¨å¤æ‚çš„æ‹–æ‹½åœºæ™¯ä¸‹ï¼Œæ˜¯éœ€è¦è‡ªè¡Œæ‰©å±•è¯¥æ‹–æ‹½åº“ï¼Œä¸Šæ‰‹éš¾åº¦ç›¸å¯¹ä¼šé«˜ä¸€ç‚¹ï¼Œä¸è¿‡æœ‰äº†è¿™äº›â€œæ‹–æ‹½çŸ¥è¯†â€ä½œä¸ºå‰ç½®åŸºç¡€ï¼Œé‚£ä¹ˆæ‰©å±•åŠŸèƒ½ä¹Ÿå°±ä¸æ˜¯ä»€ä¹ˆéš¾äº‹äº†</p><hr><h2 id="æ‰‹åŠ¨ç»ƒä¹ " tabindex="-1">æ‰‹åŠ¨ç»ƒä¹  <a class="header-anchor" href="#æ‰‹åŠ¨ç»ƒä¹ " aria-label="Permalink to &quot;æ‰‹åŠ¨ç»ƒä¹ &quot;">â€‹</a></h2><blockquote></blockquote><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">&lt;!-- &lt;img</span></span>
<span class="line"><span style="color:#6A737D;">      class=&quot;drag&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      draggable=&quot;true&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @dragstart=&quot;handleDragStartFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @drag=&quot;handleDragFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @dragend=&quot;handleDragEndFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      src=&quot;/src/assets/null.png&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      alt=&quot;&quot;</span></span>
<span class="line"><span style="color:#6A737D;">    /&gt;</span></span>
<span class="line"><span style="color:#6A737D;">    &lt;div</span></span>
<span class="line"><span style="color:#6A737D;">      @dragenter=&quot;handleDragEnterFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @dragover=&quot;handleDragOverFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @dragleave=&quot;handleDragLeaveFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      class=&quot;drop&quot;</span></span>
<span class="line"><span style="color:#6A737D;">    &gt;</span></span>
<span class="line"><span style="color:#6A737D;">      æ”¾ç½®åŒºåŸŸ</span></span>
<span class="line"><span style="color:#6A737D;">    &lt;/div&gt; --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;list&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;list_item&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">draggable</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">:data-id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;item.id&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">v-for</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;(item, index) in list&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">:key</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;index&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">@dragstart</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;handleDragStartFn($event)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">@drag</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;handleDragFn($event)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">@dragend</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;handleDragEndFn($event)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">@dragover</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;handleDragOverFn($event)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">@drop</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;handleDropFn($event)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">@dragleave</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;handleDragLeaveFn($event)&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        {{ item.name }}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { toRefs, reactive } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@vue/reactivity&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: </span><span style="color:#9ECBFF;">&quot;Search&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reactive</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">      list: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        { id: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&quot;è¥¿æ¸¸è®°&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        { id: </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&quot;çº¢æ¥¼æ¢¦&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        { id: </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&quot;æ°´æµ’ä¼ &quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        { id: </span><span style="color:#79B8FF;">4</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&quot;ä¸‰å›½æ¼”ä¹‰&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        { id: </span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&quot;å…‹æ‹‰æ‹‰ä¸å¤ªé˜³&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">        { id: </span><span style="color:#79B8FF;">6</span><span style="color:#E1E4E8;">, name: </span><span style="color:#9ECBFF;">&quot;æœ›æ±Ÿå—&quot;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">move</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">dragId</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">dropId</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dragIndex</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> state.list.</span><span style="color:#B392F0;">findIndex</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        (</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> item.id </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> dragId</span></span>
<span class="line"><span style="color:#E1E4E8;">      );</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dropIndex</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> state.list.</span><span style="color:#B392F0;">findIndex</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        (</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> item.id </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> dropId</span></span>
<span class="line"><span style="color:#E1E4E8;">      );</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">originItem</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> state.list[dragIndex];</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> newArray </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> state.list.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> item);</span></span>
<span class="line"><span style="color:#E1E4E8;">      newArray.</span><span style="color:#B392F0;">splice</span><span style="color:#E1E4E8;">(dragIndex, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">); </span><span style="color:#6A737D;">// åˆ å»æºå¯¹è±¡</span></span>
<span class="line"><span style="color:#E1E4E8;">      newArray.</span><span style="color:#B392F0;">splice</span><span style="color:#E1E4E8;">(dropIndex, </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, originItem); </span><span style="color:#6A737D;">// åœ¨ç›®æ ‡å¯¹è±¡åæ·»åŠ æºå¯¹è±¡</span></span>
<span class="line"><span style="color:#E1E4E8;">      state.list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> newArray.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> item);</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(state.list);</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragStartFn</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(e);</span></span>
<span class="line"><span style="color:#E1E4E8;">      e.dataTransfer.effectAllowed </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;move&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      state.dragId </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> e.target.dataset.id;</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;æ‹–æ‹½å¼€å§‹&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragFn</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// console.log(&quot;æ‹–æ‹½ä¸­&quot;);</span></span>
<span class="line"><span style="color:#E1E4E8;">      e.target.style.opacity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragEndFn</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      e.target.style.opacity </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;æ‹–æ‹½ç»“æŸ&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragEnterFn</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;æœ‰å…ƒç´ è¿›æ¥äº†&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragOverFn</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;æœ‰å…ƒç´ åœ¨å†…éƒ¨&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dropId</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> e.target.dataset.id;</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;ç›®æ ‡id:&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> dropId);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dragIndex</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> state.list.</span><span style="color:#B392F0;">findIndex</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        (</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> item.id </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> state.dragId</span></span>
<span class="line"><span style="color:#E1E4E8;">      );</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dropIndex</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> state.list.</span><span style="color:#B392F0;">findIndex</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">        (</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> item.id </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> dropId</span></span>
<span class="line"><span style="color:#E1E4E8;">      );</span></span>
<span class="line"><span style="color:#E1E4E8;">      e.target.classList.</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;drop-up&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;drop-down&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (dragIndex </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> dropIndex) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        e.target.classList.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;drop-down&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (dragIndex </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> dropIndex) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        e.target.classList.</span><span style="color:#B392F0;">add</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;drop-up&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDragLeaveFn</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;æœ‰å…ƒç´ ç¦»å¼€äº†&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      e.target.classList.</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;drop-up&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;drop-down&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDropFn</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;æœ‰å…ƒç´ åœ¨å†…éƒ¨é‡Šæ”¾äº†&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">dropId</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> e.target.dataset.id;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">move</span><span style="color:#E1E4E8;">(state.dragId, dropId);</span></span>
<span class="line"><span style="color:#E1E4E8;">      e.target.classList.</span><span style="color:#B392F0;">remove</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;drop-up&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;drop-down&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">...</span><span style="color:#B392F0;">toRefs</span><span style="color:#E1E4E8;">(state),</span></span>
<span class="line"><span style="color:#E1E4E8;">      handleDragStartFn,</span></span>
<span class="line"><span style="color:#E1E4E8;">      handleDragFn,</span></span>
<span class="line"><span style="color:#E1E4E8;">      handleDragEndFn,</span></span>
<span class="line"><span style="color:#E1E4E8;">      handleDragEnterFn,</span></span>
<span class="line"><span style="color:#E1E4E8;">      handleDragOverFn,</span></span>
<span class="line"><span style="color:#E1E4E8;">      handleDragLeaveFn,</span></span>
<span class="line"><span style="color:#E1E4E8;">      handleDropFn,</span></span>
<span class="line"><span style="color:#E1E4E8;">      move,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">lang</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;scss&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">scoped</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#B392F0;">.list</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">position</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">absolute</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">top</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">20</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">border</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">3</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">solid</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">#f4a620</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">#ff0099</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#B392F0;">.list_item</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">width</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">300</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">height</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">60</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">.list_item:nth-child</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">odd</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">background-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">pink</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#B392F0;">.list_item:nth-child</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">even</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">background-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">skyblue</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">.drag</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">position</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">relative</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">width</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">100</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">height</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">100</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">skyblue</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">text-align</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">center</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">line-height</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">100</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">background-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">pink</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">user-select</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">none</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">cursor</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">grab</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">.drop</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">width</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">300</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">height</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">300</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">background-color</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">#f8f8f8</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">text-align</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">center</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">line-height</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">300</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">@keyframes</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">dropUp</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">100%</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">transform</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">translateY</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">15</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">transition</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span><span style="color:#F97583;">s</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">@keyframes</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">dropDown</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">100%</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">transform</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">translateY</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">-15</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">transition</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1</span><span style="color:#F97583;">s</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">.drop-up</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">animation</span><span style="color:#E1E4E8;">: dropUp </span><span style="color:#79B8FF;">0.3</span><span style="color:#F97583;">s</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">linear</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">forwards</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#B392F0;">.drop-down</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">animation</span><span style="color:#E1E4E8;">: dropDown </span><span style="color:#79B8FF;">0.3</span><span style="color:#F97583;">s</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">linear</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">forwards</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">&lt;!-- &lt;img</span></span>
<span class="line"><span style="color:#6A737D;">      class=&quot;drag&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      draggable=&quot;true&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @dragstart=&quot;handleDragStartFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @drag=&quot;handleDragFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @dragend=&quot;handleDragEndFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      src=&quot;/src/assets/null.png&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      alt=&quot;&quot;</span></span>
<span class="line"><span style="color:#6A737D;">    /&gt;</span></span>
<span class="line"><span style="color:#6A737D;">    &lt;div</span></span>
<span class="line"><span style="color:#6A737D;">      @dragenter=&quot;handleDragEnterFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @dragover=&quot;handleDragOverFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      @dragleave=&quot;handleDragLeaveFn(e)&quot;</span></span>
<span class="line"><span style="color:#6A737D;">      class=&quot;drop&quot;</span></span>
<span class="line"><span style="color:#6A737D;">    &gt;</span></span>
<span class="line"><span style="color:#6A737D;">      æ”¾ç½®åŒºåŸŸ</span></span>
<span class="line"><span style="color:#6A737D;">    &lt;/div&gt; --&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;list&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;list_item&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">draggable</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">:data-id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;item.id&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">v-for</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;(item, index) in list&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">:key</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;index&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">@dragstart</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;handleDragStartFn($event)&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">@drag</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;handleDragFn($event)&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">@dragend</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;handleDragEndFn($event)&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">@dragover</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;handleDragOverFn($event)&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">@drop</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;handleDropFn($event)&quot;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">@dragleave</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;handleDragLeaveFn($event)&quot;</span></span>
<span class="line"><span style="color:#24292E;">      &gt;</span></span>
<span class="line"><span style="color:#24292E;">        {{ item.name }}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { toRefs, reactive } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@vue/reactivity&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  name: </span><span style="color:#032F62;">&quot;Search&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">      list: [</span></span>
<span class="line"><span style="color:#24292E;">        { id: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&quot;è¥¿æ¸¸è®°&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">        { id: </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&quot;çº¢æ¥¼æ¢¦&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">        { id: </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&quot;æ°´æµ’ä¼ &quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">        { id: </span><span style="color:#005CC5;">4</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&quot;ä¸‰å›½æ¼”ä¹‰&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">        { id: </span><span style="color:#005CC5;">5</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&quot;å…‹æ‹‰æ‹‰ä¸å¤ªé˜³&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">        { id: </span><span style="color:#005CC5;">6</span><span style="color:#24292E;">, name: </span><span style="color:#032F62;">&quot;æœ›æ±Ÿå—&quot;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">      ],</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">move</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">dragId</span><span style="color:#24292E;">, </span><span style="color:#E36209;">dropId</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dragIndex</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> state.list.</span><span style="color:#6F42C1;">findIndex</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        (</span><span style="color:#E36209;">item</span><span style="color:#24292E;">, </span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> item.id </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> dragId</span></span>
<span class="line"><span style="color:#24292E;">      );</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dropIndex</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> state.list.</span><span style="color:#6F42C1;">findIndex</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        (</span><span style="color:#E36209;">item</span><span style="color:#24292E;">, </span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> item.id </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> dropId</span></span>
<span class="line"><span style="color:#24292E;">      );</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">originItem</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> state.list[dragIndex];</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> newArray </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> state.list.</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">((</span><span style="color:#E36209;">item</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> item);</span></span>
<span class="line"><span style="color:#24292E;">      newArray.</span><span style="color:#6F42C1;">splice</span><span style="color:#24292E;">(dragIndex, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">); </span><span style="color:#6A737D;">// åˆ å»æºå¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">      newArray.</span><span style="color:#6F42C1;">splice</span><span style="color:#24292E;">(dropIndex, </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, originItem); </span><span style="color:#6A737D;">// åœ¨ç›®æ ‡å¯¹è±¡åæ·»åŠ æºå¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">      state.list </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> newArray.</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">((</span><span style="color:#E36209;">item</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> item);</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(state.list);</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragStartFn</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(e);</span></span>
<span class="line"><span style="color:#24292E;">      e.dataTransfer.effectAllowed </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;move&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">      state.dragId </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> e.target.dataset.id;</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æ‹–æ‹½å¼€å§‹&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragFn</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// console.log(&quot;æ‹–æ‹½ä¸­&quot;);</span></span>
<span class="line"><span style="color:#24292E;">      e.target.style.opacity </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragEndFn</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      e.target.style.opacity </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æ‹–æ‹½ç»“æŸ&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragEnterFn</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æœ‰å…ƒç´ è¿›æ¥äº†&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragOverFn</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      e.</span><span style="color:#6F42C1;">preventDefault</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æœ‰å…ƒç´ åœ¨å†…éƒ¨&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dropId</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> e.target.dataset.id;</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;ç›®æ ‡id:&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> dropId);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dragIndex</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> state.list.</span><span style="color:#6F42C1;">findIndex</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        (</span><span style="color:#E36209;">item</span><span style="color:#24292E;">, </span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> item.id </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> state.dragId</span></span>
<span class="line"><span style="color:#24292E;">      );</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dropIndex</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> state.list.</span><span style="color:#6F42C1;">findIndex</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">        (</span><span style="color:#E36209;">item</span><span style="color:#24292E;">, </span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> item.id </span><span style="color:#D73A49;">==</span><span style="color:#24292E;"> dropId</span></span>
<span class="line"><span style="color:#24292E;">      );</span></span>
<span class="line"><span style="color:#24292E;">      e.target.classList.</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;drop-up&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;drop-down&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (dragIndex </span><span style="color:#D73A49;">&lt;</span><span style="color:#24292E;"> dropIndex) {</span></span>
<span class="line"><span style="color:#24292E;">        e.target.classList.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;drop-down&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (dragIndex </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> dropIndex) {</span></span>
<span class="line"><span style="color:#24292E;">        e.target.classList.</span><span style="color:#6F42C1;">add</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;drop-up&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDragLeaveFn</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æœ‰å…ƒç´ ç¦»å¼€äº†&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      e.target.classList.</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;drop-up&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;drop-down&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDropFn</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;æœ‰å…ƒç´ åœ¨å†…éƒ¨é‡Šæ”¾äº†&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">dropId</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> e.target.dataset.id;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">move</span><span style="color:#24292E;">(state.dragId, dropId);</span></span>
<span class="line"><span style="color:#24292E;">      e.target.classList.</span><span style="color:#6F42C1;">remove</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;drop-up&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;drop-down&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">...</span><span style="color:#6F42C1;">toRefs</span><span style="color:#24292E;">(state),</span></span>
<span class="line"><span style="color:#24292E;">      handleDragStartFn,</span></span>
<span class="line"><span style="color:#24292E;">      handleDragFn,</span></span>
<span class="line"><span style="color:#24292E;">      handleDragEndFn,</span></span>
<span class="line"><span style="color:#24292E;">      handleDragEnterFn,</span></span>
<span class="line"><span style="color:#24292E;">      handleDragOverFn,</span></span>
<span class="line"><span style="color:#24292E;">      handleDragLeaveFn,</span></span>
<span class="line"><span style="color:#24292E;">      handleDropFn,</span></span>
<span class="line"><span style="color:#24292E;">      move,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">lang</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;scss&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">scoped</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#6F42C1;">.list</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">position</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">absolute</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">top</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">20</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">border</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">3</span><span style="color:#D73A49;">px</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">solid</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">#f4a620</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">#ff0099</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6F42C1;">.list_item</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">width</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">300</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">height</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">60</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.list_item:nth-child</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">odd</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">background-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">pink</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6F42C1;">.list_item:nth-child</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">even</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">background-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">skyblue</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.drag</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">position</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">relative</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">width</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">100</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">height</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">100</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">skyblue</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">text-align</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">center</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">line-height</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">100</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">background-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">pink</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">user-select</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">none</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">cursor</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">grab</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.drop</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">width</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">300</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">height</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">300</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">background-color</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">#f8f8f8</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">text-align</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">center</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">line-height</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">300</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">@keyframes</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dropUp</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">100%</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">transform</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">translateY</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">15</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">transition</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span><span style="color:#D73A49;">s</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">@keyframes</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">dropDown</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">100%</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">transform</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">translateY</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">-15</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">transition</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1</span><span style="color:#D73A49;">s</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">.drop-up</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">animation</span><span style="color:#24292E;">: dropUp </span><span style="color:#005CC5;">0.3</span><span style="color:#D73A49;">s</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">linear</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">forwards</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#6F42C1;">.drop-down</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">animation</span><span style="color:#24292E;">: dropDown </span><span style="color:#005CC5;">0.3</span><span style="color:#D73A49;">s</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">linear</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">forwards</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span></code></pre></div>`,91),e=[o];function t(c,r,E,y,i,d){return n(),a("div",null,e)}const u=s(p,[["render",t]]);export{g as __pageData,u as default};
